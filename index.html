<!DOCTYPE html>

<html>
<head>
<title>Pottery Studio Manager</title>
<script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
<div id="root"></div>
<script type="text/babel">
const {useState, useEffect} = React;

const supabase = window.supabase.createClient(
‘https://bvciswqwilpqvcbqesyp.supabase.co’,
‘eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJ2Y2lzd3F3aWxwcXZjYnFlc3lwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk4MjQ3MDAsImV4cCI6MjA4NTQwMDcwMH0.kgt86QcNIWLfLaEF8h5ZbGJ61nYXIFvNXvtfQcikiTM’
);

function App() {
const [view, setView] = useState(‘member’);
const [members, setMembers] = useState([]);
const [entries, setEntries] = useState([]);
const [loading, setLoading] = useState(false);
const [error, setError] = useState(’’);

const [selectedMember, setSelectedMember] = useState(’’);
const [description, setDescription] = useState(’’);
const [notes, setNotes] = useState(’’);
const [firingTemp, setFiringTemp] = useState(’’);
const [kilnSpace, setKilnSpace] = useState(’’);
const [payment, setPayment] = useState(’’);

useEffect(function() {
loadMembers();
loadEntries();
}, []);

async function loadMembers() {
setLoading(true);
try {
const result = await supabase.from(‘members’).select(’*’).order(‘name’);
if (result.error) {
setError(’Error loading members: ’ + result.error.message);
} else {
setMembers(result.data || []);
}
} catch (e) {
setError(’Failed to load members: ’ + e.message);
}
setLoading(false);
}

async function loadEntries() {
try {
const result = await supabase.from(‘entries’).select(’*’).order(‘created_at’, {ascending: false});
if (result.error) {
setError(’Error loading entries: ’ + result.error.message);
} else {
setEntries(result.data || []);
}
} catch (e) {
setError(’Failed to load entries: ’ + e.message);
}
}

function calculateCost() {
const rates = {
‘full’: 65,
‘half’: 40,
‘quarter’: 25,
‘round8’: 20,
‘round3’: 10
};
return rates[kilnSpace] || 0;
}

async function submitEntry() {
if (!selectedMember || !firingTemp || !kilnSpace || !payment) {
alert(‘Please fill in all required fields’);
return;
}

```
const member = members.find(function(m) { return m.id === parseInt(selectedMember); });
if (!member) {
  alert('Member not found');
  return;
}

const cost = calculateCost();

const kilnLabels = {
  'full': 'Full Kiln',
  'half': '1/2 Kiln',
  'quarter': '1/4 Kiln',
  'round8': '1/2 Round Shelf (up to 8" tall)',
  'round3': '1/2 Round Shelf (up to 3" tall)'
};

const entry = {
  member_id: parseInt(selectedMember),
  member_name: member.name,
  member_email: member.email,
  description: description || null,
  any_notes: notes || null,
  firing_temp: firingTemp,
  kiln_space: kilnLabels[kilnSpace],
  dimensions: 'N/A',
  cubic_inches: null,
  cost: parseFloat(cost),
  photo: null,
  payment_method: payment,
  status: payment === 'venmo' ? 'Paid via Venmo' : 'Bill End of Month'
};

setLoading(true);
try {
  const result = await supabase.from('entries').insert([entry]);
  if (result.error) {
    alert('Error submitting: ' + result.error.message);
  } else {
    if (payment === 'venmo') {
      window.open('https://venmo.com/u/newcomb_BCAT?txn=pay&amount=' + cost + '&note=Kiln%20firing%20-%20' + member.name, '_blank');
    }
    
    setSelectedMember('');
    setDescription('');
    setNotes('');
    setFiringTemp('');
    setKilnSpace('');
    setPayment('');
    
    await loadEntries();
    alert('Entry submitted successfully!');
  }
} catch (e) {
  alert('Error: ' + e.message);
}
setLoading(false);
```

}

return (
<div className="min-h-screen bg-gray-50">
<div className="bg-black text-white py-6 px-6">
<div className="max-w-6xl mx-auto">
<h1 className="text-3xl font-light">Pottery Studio Manager</h1>
</div>
</div>

```
  {error && (
    <div className="max-w-6xl mx-auto px-6 pt-6">
      <div className="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded">
        {error}
      </div>
    </div>
  )}
  
  <div className="max-w-6xl mx-auto px-6 py-12">
    <div className="bg-white border rounded-lg p-8">
      <h2 className="text-2xl font-light mb-6">Submit Piece for Firing</h2>
      
      {loading && <div className="text-blue-600 mb-4">Loading...</div>}
      
      <div className="space-y-4">
        <div>
          <label className="block text-sm font-medium mb-2">Select Your Name *</label>
          <select 
            value={selectedMember} 
            onChange={function(e) { setSelectedMember(e.target.value); }} 
            className="w-full px-4 py-2 border rounded"
          >
            <option value="">Choose your name...</option>
            {members.map(function(m) {
              return <option key={m.id} value={m.id}>{m.name}</option>;
            })}
          </select>
        </div>
        
        <div>
          <label className="block text-sm font-medium mb-2">Description</label>
          <input 
            type="text" 
            value={description} 
            onChange={function(e) { setDescription(e.target.value); }}
            className="w-full px-4 py-2 border rounded" 
            placeholder="e.g., Large bowl"
          />
        </div>
        
        <div>
          <label className="block text-sm font-medium mb-2">Any Notes?</label>
          <input 
            type="text" 
            value={notes} 
            onChange={function(e) { setNotes(e.target.value); }}
            className="w-full px-4 py-2 border rounded" 
            placeholder="e.g., Blue glaze"
          />
        </div>
        
        <div>
          <label className="block text-sm font-medium mb-2">Firing Temperature *</label>
          <select 
            value={firingTemp} 
            onChange={function(e) { setFiringTemp(e.target.value); }}
            className="w-full px-4 py-2 border rounded"
          >
            <option value="">Select...</option>
            <option value="Bisque (Cone 04)">Bisque (Cone 04)</option>
            <option value="Bisque (Cone 05)">Bisque (Cone 05)</option>
            <option value="Bisque (Cone 06)">Bisque (Cone 06)</option>
            <option value="Glaze (Cone 6)">Glaze (Cone 6)</option>
            <option value="Other">Other</option>
          </select>
        </div>
        
        <div>
          <label className="block text-sm font-medium mb-2">Kiln Space *</label>
          <select 
            value={kilnSpace} 
            onChange={function(e) { setKilnSpace(e.target.value); }}
            className="w-full px-4 py-2 border rounded"
          >
            <option value="">Select...</option>
            <option value="full">Full Kiln - $65</option>
            <option value="half">1/2 Kiln - $40</option>
            <option value="quarter">1/4 Kiln - $25</option>
            <option value="round8">1/2 Round Shelf (up to 8" tall) - $20</option>
            <option value="round3">1/2 Round Shelf (up to 3" tall) - $10</option>
          </select>
        </div>
        
        {kilnSpace && (
          <div className="bg-green-50 p-4 rounded border border-green-200">
            <div className="text-right">
              <span className="text-sm">Cost: </span>
              <span className="text-2xl font-semibold text-green-700">${calculateCost()}</span>
            </div>
          </div>
        )}
        
        <div>
          <label className="block text-sm font-medium mb-2">Payment Method *</label>
          <div className="flex gap-4">
            <label className="flex items-center cursor-pointer bg-white border px-4 py-3 rounded">
              <input 
                type="radio" 
                name="payment" 
                value="venmo" 
                checked={payment === 'venmo'}
                onChange={function(e) { setPayment(e.target.value); }}
                className="mr-3"
              />
              <span className="font-medium text-blue-600">Pay Now via Venmo</span>
            </label>
            <label className="flex items-center cursor-pointer bg-white border px-4 py-3 rounded">
              <input 
                type="radio" 
                name="payment" 
                value="monthly" 
                checked={payment === 'monthly'}
                onChange={function(e) { setPayment(e.target.value); }}
                className="mr-3"
              />
              <span className="font-medium text-green-600">Bill at End of Month</span>
            </label>
          </div>
        </div>
        
        <button 
          onClick={submitEntry}
          disabled={loading}
          className="w-full bg-black hover:bg-gray-800 text-white py-3 rounded font-medium disabled:bg-gray-400"
        >
          {loading ? 'Submitting...' : 'Submit for Firing'}
        </button>
      </div>
    </div>
    
    <div className="bg-white border rounded-lg p-8 mt-6">
      <h2 className="text-2xl font-light mb-6">Recent Entries</h2>
      
      {entries.length === 0 ? (
        <p className="text-gray-500 text-center py-8">No entries yet</p>
      ) : (
        <div className="space-y-4">
          {entries.map(function(e) {
            return (
              <div key={e.id} className="border rounded p-4">
                <div className="flex justify-between items-start">
                  <div>
                    <p className="font-semibold">{e.member_name}</p>
                    <p className="text-sm text-gray-600">{e.description}</p>
                    <p className="text-xs text-gray-500 mt-1">{e.any_notes}</p>
                  </div>
                  <div className="text-right">
                    <p className="text-xl font-semibold text-green-700">${e.cost}</p>
                    <span className={'text-xs px-2 py-1 rounded ' + (e.status === 'Paid via Venmo' ? 'bg-blue-100 text-blue-800' : 'bg-green-100 text-green-800')}>
                      {e.status}
                    </span>
                  </div>
                </div>
                <div className="grid grid-cols-3 gap-2 mt-3 text-sm">
                  <div><span className="text-gray-500">Date:</span> {new Date(e.created_at).toLocaleDateString()}</div>
                  <div><span className="text-gray-500">Firing:</span> {e.firing_temp}</div>
                  <div><span className="text-gray-500">Space:</span> {e.kiln_space}</div>
                </div>
              </div>
            );
          })}
        </div>
      )}
    </div>
  </div>
</div>
```

);
}

ReactDOM.render(<App />, document.getElementById(‘root’));
</script>

</body>
</html>
